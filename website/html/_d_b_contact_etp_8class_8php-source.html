<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Stage: D:/developpement/php/www/Stage/trunk/class/DBClasses/DBContactEtp.class.php Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<h1>D:/developpement/php/www/Stage/trunk/class/DBClasses/DBContactEtp.class.php</h1><a href="_d_b_contact_etp_8class_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00002"></a>00002 set_include_path(<span class="stringliteral">"."</span>.PATH_SEPARATOR.<span class="stringliteral">".."</span>.PATH_SEPARATOR.<span class="stringliteral">"../.."</span>);
<a name="l00003"></a>00003 <span class="keywordflow">if</span>(!isset($ROOT_PATH))
<a name="l00004"></a>00004 require_once(<span class="stringliteral">"inc/main.inc.php"</span>);
<a name="l00005"></a>00005 
<a name="l00006"></a>00006 <span class="comment">// Généré via PHPClassGenerator via l'url index.php?nb_champs=7&amp;pgc_url=&amp;nom_table=contact_etp&amp;nom_champ_1=id_contact&amp;type_champ_1=3&amp;taille_champ_1=&amp;champ_facultatif_1=&amp;valeur_defaut_1=&amp;auto_increment_1=on&amp;clef_primaire_1=on&amp;getter_1=on&amp;setter_1=&amp;nom_champ_2=nom_contact&amp;type_champ_2=1&amp;taille_champ_2=50&amp;champ_facultatif_2=&amp;valeur_defaut_2=&amp;auto_increment_2=&amp;clef_primaire_2=&amp;getter_2=on&amp;setter_2=&amp;nom_champ_3=prenom_contact&amp;type_champ_3=1&amp;taille_champ_3=50&amp;champ_facultatif_3=on&amp;valeur_defaut_3=&amp;auto_increment_3=&amp;clef_primaire_3=&amp;getter_3=on&amp;setter_3=&amp;nom_champ_4=email_contact&amp;type_champ_4=1&amp;taille_champ_4=255&amp;champ_facultatif_4=on&amp;valeur_defaut_4=&amp;auto_increment_4=&amp;clef_primaire_4=&amp;getter_4=on&amp;setter_4=&amp;nom_champ_5=tel_contact&amp;type_champ_5=1&amp;taille_champ_5=255&amp;champ_facultatif_5=on&amp;valeur_defaut_5=&amp;auto_increment_5=&amp;clef_primaire_5=&amp;getter_5=on&amp;setter_5=&amp;nom_champ_6=fonction_contact&amp;type_champ_6=1&amp;taille_champ_6=255&amp;champ_facultatif_6=on&amp;valeur_defaut_6=&amp;auto_increment_6=&amp;clef_primaire_6=&amp;getter_6=on&amp;setter_6=&amp;nom_champ_7=id_entreprise&amp;type_champ_7=3&amp;taille_champ_7=&amp;champ_facultatif_7=&amp;valeur_defaut_7=&amp;auto_increment_7=&amp;clef_primaire_7=&amp;getter_7=on&amp;setter_7=&amp;</span>
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 
<a name="l00013"></a><a class="code" href="class_d_b_contact_etp.html">00013</a> <span class="keyword">class </span><a class="code" href="class_d_b_contact_etp.html">DBContactEtp</a> {
<a name="l00014"></a><a class="code" href="class_d_b_contact_etp.html#2578ea167d6085220855c0260f7fa084">00014</a>     <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="class_d_b_contact_etp.html#2578ea167d6085220855c0260f7fa084">$TABLE_NAME</a> = <span class="stringliteral">"contact_etp"</span>;
<a name="l00015"></a><a class="code" href="class_d_b_contact_etp.html#66b7194ede11cebc6b72a0337cc7c25a">00015</a>     <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="class_d_b_contact_etp.html#66b7194ede11cebc6b72a0337cc7c25a">$FIELD_ID_CONTACT</a> = <span class="stringliteral">"id_contact"</span>;
<a name="l00016"></a><a class="code" href="class_d_b_contact_etp.html#4341f05c7de50c3d93db20d6fefd1ff8">00016</a>     <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="class_d_b_contact_etp.html#4341f05c7de50c3d93db20d6fefd1ff8">$FIELD_NOM_CONTACT</a> = <span class="stringliteral">"nom_contact"</span>;
<a name="l00017"></a><a class="code" href="class_d_b_contact_etp.html#7ae27ee9b61162d29e1d98b2dbff965b">00017</a>     <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="class_d_b_contact_etp.html#7ae27ee9b61162d29e1d98b2dbff965b">$FIELD_PRENOM_CONTACT</a> = <span class="stringliteral">"prenom_contact"</span>;
<a name="l00018"></a><a class="code" href="class_d_b_contact_etp.html#d1f836b7000df5824ffe57651d2ded1d">00018</a>     <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="class_d_b_contact_etp.html#d1f836b7000df5824ffe57651d2ded1d">$FIELD_EMAIL_CONTACT</a> = <span class="stringliteral">"email_contact"</span>;
<a name="l00019"></a><a class="code" href="class_d_b_contact_etp.html#aade08f92b75b16cf7b6bd6c4a22cef8">00019</a>     <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="class_d_b_contact_etp.html#aade08f92b75b16cf7b6bd6c4a22cef8">$FIELD_TEL_CONTACT</a> = <span class="stringliteral">"tel_contact"</span>;
<a name="l00020"></a><a class="code" href="class_d_b_contact_etp.html#d549b8c6b3d2b5514c245cac876298d4">00020</a>     <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="class_d_b_contact_etp.html#d549b8c6b3d2b5514c245cac876298d4">$FIELD_FONCTION_CONTACT</a> = <span class="stringliteral">"fonction_contact"</span>;
<a name="l00021"></a><a class="code" href="class_d_b_contact_etp.html#2232759e89d471fb60dde540a7d28c6d">00021</a>     <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="class_d_b_contact_etp.html#2232759e89d471fb60dde540a7d28c6d">$FIELD_ID_ENTREPRISE</a> = <span class="stringliteral">"id_entreprise"</span>;
<a name="l00022"></a>00022 
<a name="l00023"></a><a class="code" href="class_d_b_contact_etp.html#edbc9cf6e13175c66c57b45061ebfdef">00023</a>     <span class="keyword">private</span> <a class="code" href="class_d_b_contact_etp.html#edbc9cf6e13175c66c57b45061ebfdef">$_idContact</a>;
<a name="l00024"></a><a class="code" href="class_d_b_contact_etp.html#21a6537f5abfc1cfad2818d4ccd589ae">00024</a>     <span class="keyword">private</span> <a class="code" href="class_d_b_contact_etp.html#21a6537f5abfc1cfad2818d4ccd589ae">$_nomContact</a>;
<a name="l00025"></a><a class="code" href="class_d_b_contact_etp.html#795a729552d67462df5a50db303e95f6">00025</a>     <span class="keyword">private</span> <a class="code" href="class_d_b_contact_etp.html#795a729552d67462df5a50db303e95f6">$_prenomContact</a>;
<a name="l00026"></a><a class="code" href="class_d_b_contact_etp.html#fe1158c412e5950f278aa74d6d7f9770">00026</a>     <span class="keyword">private</span> <a class="code" href="class_d_b_contact_etp.html#fe1158c412e5950f278aa74d6d7f9770">$_emailContact</a>;
<a name="l00027"></a><a class="code" href="class_d_b_contact_etp.html#f1782edcfef4594f103d44840e82a221">00027</a>     <span class="keyword">private</span> <a class="code" href="class_d_b_contact_etp.html#f1782edcfef4594f103d44840e82a221">$_telContact</a>;
<a name="l00028"></a><a class="code" href="class_d_b_contact_etp.html#e0fcf5aef73240d815648060a1c53583">00028</a>     <span class="keyword">private</span> <a class="code" href="class_d_b_contact_etp.html#e0fcf5aef73240d815648060a1c53583">$_fonctionContact</a>;
<a name="l00029"></a><a class="code" href="class_d_b_contact_etp.html#51934cc0d04f0dda8539ec244157bff5">00029</a>     <span class="keyword">private</span> <a class="code" href="class_d_b_contact_etp.html#51934cc0d04f0dda8539ec244157bff5">$_idEntreprise</a>;
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 
<a name="l00043"></a><a class="code" href="class_d_b_contact_etp.html#04a2fc11cd2455bf09d9f944f7d4914b">00043</a>     <span class="keyword">private</span>  function <a class="code" href="class_d_b_contact_etp.html#04a2fc11cd2455bf09d9f944f7d4914b">__construct</a>($idContact, $nomContact, $prenomContact, $emailContact, $telContact, $fonctionContact, $idEntreprise){
<a name="l00044"></a>00044         $this-&gt;_idContact = $idContact;
<a name="l00045"></a>00045         $this-&gt;_nomContact = $nomContact;
<a name="l00046"></a>00046         $this-&gt;_prenomContact = $prenomContact;
<a name="l00047"></a>00047         $this-&gt;_emailContact = $emailContact;
<a name="l00048"></a>00048         $this-&gt;_telContact = $telContact;
<a name="l00049"></a>00049         $this-&gt;_fonctionContact = $fonctionContact;
<a name="l00050"></a>00050         $this-&gt;_idEntreprise = $idEntreprise;
<a name="l00051"></a>00051     }
<a name="l00052"></a>00052         
<a name="l00053"></a>00053         
<a name="l00059"></a><a class="code" href="class_d_b_contact_etp.html#40e2e63fff1332d39f2d0ab43ef0dd96">00059</a>     <span class="keyword">public</span>  function <a class="code" href="class_d_b_contact_etp.html#40e2e63fff1332d39f2d0ab43ef0dd96">getIdContact</a>(){
<a name="l00060"></a>00060         <span class="keywordflow">return</span> $this-&gt;_idContact;
<a name="l00061"></a>00061     }
<a name="l00062"></a><a class="code" href="class_d_b_contact_etp.html#bf442b50c4cb32bf613e906113debec3">00062</a>     <span class="keyword">public</span>  function <a class="code" href="class_d_b_contact_etp.html#bf442b50c4cb32bf613e906113debec3">getNomContact</a>(){
<a name="l00063"></a>00063         <span class="keywordflow">return</span> $this-&gt;_nomContact;
<a name="l00064"></a>00064     }
<a name="l00065"></a><a class="code" href="class_d_b_contact_etp.html#bb326f37e0ecfcb61d7f96a99e9319a4">00065</a>     <span class="keyword">public</span>  function <a class="code" href="class_d_b_contact_etp.html#bb326f37e0ecfcb61d7f96a99e9319a4">getPrenomContact</a>(){
<a name="l00066"></a>00066         <span class="keywordflow">return</span> $this-&gt;_prenomContact;
<a name="l00067"></a>00067     }
<a name="l00068"></a><a class="code" href="class_d_b_contact_etp.html#9da30a380b631337c056158d347c1736">00068</a>     <span class="keyword">public</span>  function <a class="code" href="class_d_b_contact_etp.html#9da30a380b631337c056158d347c1736">getEmailContact</a>(){
<a name="l00069"></a>00069         <span class="keywordflow">return</span> $this-&gt;_emailContact;
<a name="l00070"></a>00070     }
<a name="l00071"></a><a class="code" href="class_d_b_contact_etp.html#af1c40a38a300b2eaa866a8695a2ad5c">00071</a>     <span class="keyword">public</span>  function <a class="code" href="class_d_b_contact_etp.html#af1c40a38a300b2eaa866a8695a2ad5c">getTelContact</a>(){
<a name="l00072"></a>00072         <span class="keywordflow">return</span> $this-&gt;_telContact;
<a name="l00073"></a>00073     }
<a name="l00074"></a><a class="code" href="class_d_b_contact_etp.html#1b3316e4137fe2ead0762bf61358ef03">00074</a>     <span class="keyword">public</span>  function <a class="code" href="class_d_b_contact_etp.html#1b3316e4137fe2ead0762bf61358ef03">getFonctionContact</a>(){
<a name="l00075"></a>00075         <span class="keywordflow">return</span> $this-&gt;_fonctionContact;
<a name="l00076"></a>00076     }
<a name="l00077"></a><a class="code" href="class_d_b_contact_etp.html#7ce99446674a378bb8361fec12e346f4">00077</a>     <span class="keyword">public</span>  function <a class="code" href="class_d_b_contact_etp.html#7ce99446674a378bb8361fec12e346f4">getIdEntreprise</a>(){
<a name="l00078"></a>00078         <span class="keywordflow">return</span> $this-&gt;_idEntreprise;
<a name="l00079"></a>00079     }
<a name="l00080"></a>00080         
<a name="l00081"></a>00081         
<a name="l00087"></a><a class="code" href="class_d_b_contact_etp.html#90b343153e5524af444beb8905072c75">00087</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_d_b_contact_etp.html#90b343153e5524af444beb8905072c75">tableExists</a>(){
<a name="l00088"></a>00088         <span class="keywordflow">return</span> <a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;tableExists(<a class="code" href="class_d_b_contact_etp.html#2578ea167d6085220855c0260f7fa084">DBContactEtp::$TABLE_NAME</a>);
<a name="l00089"></a>00089     }
<a name="l00090"></a>00090         
<a name="l00091"></a>00091         
<a name="l00096"></a><a class="code" href="class_d_b_contact_etp.html#2e0abba8b11342fd77e6f4f0525230a7">00096</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_d_b_contact_etp.html#2e0abba8b11342fd77e6f4f0525230a7">createTable</a>(){
<a name="l00097"></a>00097         $sql = <span class="stringliteral">"CREATE TABLE `"</span>.DBContactEtp::$TABLE_NAME.<span class="stringliteral">"` (  </span>
<a name="l00098"></a>00098 <span class="stringliteral">                            `"</span>.<a class="code" href="class_d_b_contact_etp.html#66b7194ede11cebc6b72a0337cc7c25a">DBContactEtp::$FIELD_ID_CONTACT</a>.<span class="stringliteral">"` INT(11) NOT NULL  auto_increment,  </span>
<a name="l00099"></a>00099 <span class="stringliteral">                            `"</span>.<a class="code" href="class_d_b_contact_etp.html#4341f05c7de50c3d93db20d6fefd1ff8">DBContactEtp::$FIELD_NOM_CONTACT</a>.<span class="stringliteral">"` VARCHAR(50) NOT NULL  ,  </span>
<a name="l00100"></a>00100 <span class="stringliteral">                            `"</span>.<a class="code" href="class_d_b_contact_etp.html#7ae27ee9b61162d29e1d98b2dbff965b">DBContactEtp::$FIELD_PRENOM_CONTACT</a>.<span class="stringliteral">"` VARCHAR(50) NULL  ,  </span>
<a name="l00101"></a>00101 <span class="stringliteral">                            `"</span>.<a class="code" href="class_d_b_contact_etp.html#d1f836b7000df5824ffe57651d2ded1d">DBContactEtp::$FIELD_EMAIL_CONTACT</a>.<span class="stringliteral">"` VARCHAR(255) NULL  ,  </span>
<a name="l00102"></a>00102 <span class="stringliteral">                            `"</span>.<a class="code" href="class_d_b_contact_etp.html#aade08f92b75b16cf7b6bd6c4a22cef8">DBContactEtp::$FIELD_TEL_CONTACT</a>.<span class="stringliteral">"` VARCHAR(255) NULL  ,  </span>
<a name="l00103"></a>00103 <span class="stringliteral">                            `"</span>.<a class="code" href="class_d_b_contact_etp.html#d549b8c6b3d2b5514c245cac876298d4">DBContactEtp::$FIELD_FONCTION_CONTACT</a>.<span class="stringliteral">"` VARCHAR(255) NULL  ,  </span>
<a name="l00104"></a>00104 <span class="stringliteral">                            `"</span>.<a class="code" href="class_d_b_contact_etp.html#2232759e89d471fb60dde540a7d28c6d">DBContactEtp::$FIELD_ID_ENTREPRISE</a>.<span class="stringliteral">"` INT(11) NOT NULL  ,</span>
<a name="l00105"></a>00105 <span class="stringliteral">                            PRIMARY KEY (`"</span>.<a class="code" href="class_d_b_contact_etp.html#66b7194ede11cebc6b72a0337cc7c25a">DBContactEtp::$FIELD_ID_CONTACT</a>.<span class="stringliteral">"`)</span>
<a name="l00106"></a>00106 <span class="stringliteral">                ) ENGINE=MyISAM DEFAULT CHARSET=latin1;"</span>;
<a name="l00107"></a>00107         
<a name="l00108"></a>00108         
<a name="l00109"></a>00109         foreach(explode(<span class="stringliteral">";"</span>, $sql) as $query)
<a name="l00110"></a>00110         {
<a name="l00111"></a>00111             <span class="keywordflow">if</span>($query != <span class="stringliteral">""</span>)
<a name="l00112"></a>00112                 <a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;executeQuery($query);
<a name="l00113"></a>00113         }
<a name="l00114"></a>00114     }
<a name="l00115"></a>00115         
<a name="l00116"></a>00116         
<a name="l00128"></a><a class="code" href="class_d_b_contact_etp.html#a5225c43a11394f4a81f171ab9aefd0e">00128</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_d_b_contact_etp.html#a5225c43a11394f4a81f171ab9aefd0e">createRecord</a>($nomContact, $prenomContact, $emailContact, $telContact, $fonctionContact, $entreprise){
<a name="l00129"></a>00129         assert(($entreprise == null) || ($entreprise instanceof <a class="code" href="class_d_b_entreprise.html">DBEntreprise</a>));
<a name="l00130"></a>00130         $sql = <span class="stringliteral">"INSERT INTO "</span>.DBContactEtp::$TABLE_NAME.<span class="stringliteral">" ("</span>
<a name="l00131"></a>00131                             .DBContactEtp::$FIELD_NOM_CONTACT.<span class="stringliteral">", "</span>
<a name="l00132"></a>00132                             .DBContactEtp::$FIELD_PRENOM_CONTACT.<span class="stringliteral">", "</span>
<a name="l00133"></a>00133                             .DBContactEtp::$FIELD_EMAIL_CONTACT.<span class="stringliteral">", "</span>
<a name="l00134"></a>00134                             .DBContactEtp::$FIELD_TEL_CONTACT.<span class="stringliteral">", "</span>
<a name="l00135"></a>00135                             .DBContactEtp::$FIELD_FONCTION_CONTACT.<span class="stringliteral">", "</span>
<a name="l00136"></a>00136                             .DBContactEtp::$FIELD_ID_ENTREPRISE.<span class="stringliteral">" "</span>
<a name="l00137"></a>00137                             .<span class="stringliteral">") VALUES ("</span>
<a name="l00138"></a>00138                             .DBConnector::getDBConnector()-&gt;processString(<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;echapString($nomContact)).<span class="stringliteral">", "</span>
<a name="l00139"></a>00139                             .DBConnector::getDBConnector()-&gt;processObject(<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;echapString($prenomContact)).<span class="stringliteral">", "</span>
<a name="l00140"></a>00140                             .DBConnector::getDBConnector()-&gt;processObject(DBConnector::getDBConnector()-&gt;echapString($emailContact)).<span class="stringliteral">", "</span>
<a name="l00141"></a>00141                             .DBConnector::getDBConnector()-&gt;processObject(DBConnector::getDBConnector()-&gt;echapString($telContact)).<span class="stringliteral">", "</span>
<a name="l00142"></a>00142                             .DBConnector::getDBConnector()-&gt;processObject(DBConnector::getDBConnector()-&gt;echapString($fonctionContact)).<span class="stringliteral">", "</span>
<a name="l00143"></a>00143                             .DBConnector::getDBConnector()-&gt;processInt(($entreprise == null)?-1:$entreprise-&gt;<a class="code" href="class_d_b_contact_etp.html#7ce99446674a378bb8361fec12e346f4">getIdEntreprise</a>()).<span class="stringliteral">" "</span>
<a name="l00144"></a>00144                             .<span class="stringliteral">")"</span>;
<a name="l00145"></a>00145         
<a name="l00146"></a>00146         $id = <a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;executeQuery($sql);
<a name="l00147"></a>00147         
<a name="l00148"></a>00148         $obj = <a class="code" href="class_d_b_contact_etp.html#2e8af7fe3e8d606421c18c113f348329">DBContactEtp::getRecords</a>($id);
<a name="l00149"></a>00149         assert(count($obj) == 1);
<a name="l00150"></a>00150         <span class="keywordflow">return</span> $obj[0];
<a name="l00151"></a>00151     }
<a name="l00152"></a>00152     
<a name="l00153"></a>00153         
<a name="l00166"></a><a class="code" href="class_d_b_contact_etp.html#2e8af7fe3e8d606421c18c113f348329">00166</a>         <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_d_b_contact_etp.html#2e8af7fe3e8d606421c18c113f348329">getRecords</a>($idContact=<span class="stringliteral">""</span>, $nomContact=<span class="stringliteral">""</span>, $prenomContact=<span class="stringliteral">""</span>, $emailContact=<span class="stringliteral">""</span>, $telContact=<span class="stringliteral">""</span>, $fonctionContact=<span class="stringliteral">""</span>, $idEntreprise=<span class="stringliteral">""</span>){
<a name="l00167"></a>00167         $sql = <span class="stringliteral">"SELECT * FROM "</span>.DBContactEtp::$TABLE_NAME.<span class="stringliteral">" WHERE 1"</span>;
<a name="l00168"></a>00168         
<a name="l00169"></a>00169         <span class="keywordflow">if</span>($idContact != <span class="stringliteral">""</span>)
<a name="l00170"></a>00170             $sql .= <span class="stringliteral">" AND "</span>.DBContactEtp::$FIELD_ID_CONTACT.<span class="stringliteral">"="</span>.<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;processInt($idContact);
<a name="l00171"></a>00171         <span class="keywordflow">if</span>($nomContact != <span class="stringliteral">""</span>)
<a name="l00172"></a>00172             $sql .= <span class="stringliteral">" AND "</span>.DBContactEtp::$FIELD_NOM_CONTACT.<span class="stringliteral">"="</span>.<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;processString(<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;echapString($nomContact));
<a name="l00173"></a>00173         <span class="keywordflow">if</span>($prenomContact != <span class="stringliteral">""</span>)
<a name="l00174"></a>00174             $sql .= <span class="stringliteral">" AND "</span>.DBContactEtp::$FIELD_PRENOM_CONTACT.<span class="stringliteral">"="</span>.<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;processObject(<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;echapString($prenomContact));
<a name="l00175"></a>00175         <span class="keywordflow">if</span>($emailContact != <span class="stringliteral">""</span>)
<a name="l00176"></a>00176             $sql .= <span class="stringliteral">" AND "</span>.DBContactEtp::$FIELD_EMAIL_CONTACT.<span class="stringliteral">"="</span>.<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;processObject(<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;echapString($emailContact));
<a name="l00177"></a>00177         <span class="keywordflow">if</span>($telContact != <span class="stringliteral">""</span>)
<a name="l00178"></a>00178             $sql .= <span class="stringliteral">" AND "</span>.DBContactEtp::$FIELD_TEL_CONTACT.<span class="stringliteral">"="</span>.<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;processObject(<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;echapString($telContact));
<a name="l00179"></a>00179         <span class="keywordflow">if</span>($fonctionContact != <span class="stringliteral">""</span>)
<a name="l00180"></a>00180             $sql .= <span class="stringliteral">" AND "</span>.DBContactEtp::$FIELD_FONCTION_CONTACT.<span class="stringliteral">"="</span>.<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;processObject(<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;echapString($fonctionContact));
<a name="l00181"></a>00181         <span class="keywordflow">if</span>($idEntreprise != <span class="stringliteral">""</span>)
<a name="l00182"></a>00182             $sql .= <span class="stringliteral">" AND "</span>.DBContactEtp::$FIELD_ID_ENTREPRISE.<span class="stringliteral">"="</span>.<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;processInt($idEntreprise);
<a name="l00183"></a>00183         
<a name="l00184"></a>00184         $res = <a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;executeQuery($sql);
<a name="l00185"></a>00185         
<a name="l00186"></a>00186         $return = array();
<a name="l00187"></a>00187         $i=0;
<a name="l00188"></a>00188         <span class="keywordflow">while</span>($result = <a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;fetchArray($res))
<a name="l00189"></a>00189         {
<a name="l00190"></a>00190             $return[$i] = <span class="keyword">new</span> <a class="code" href="class_d_b_contact_etp.html">DBContactEtp</a>(
<a name="l00191"></a>00191                                             $result[<a class="code" href="class_d_b_contact_etp.html#66b7194ede11cebc6b72a0337cc7c25a">DBContactEtp::$FIELD_ID_CONTACT</a>],
<a name="l00192"></a>00192                                             $result[<a class="code" href="class_d_b_contact_etp.html#4341f05c7de50c3d93db20d6fefd1ff8">DBContactEtp::$FIELD_NOM_CONTACT</a>],
<a name="l00193"></a>00193                                             $result[<a class="code" href="class_d_b_contact_etp.html#7ae27ee9b61162d29e1d98b2dbff965b">DBContactEtp::$FIELD_PRENOM_CONTACT</a>],
<a name="l00194"></a>00194                                             $result[<a class="code" href="class_d_b_contact_etp.html#d1f836b7000df5824ffe57651d2ded1d">DBContactEtp::$FIELD_EMAIL_CONTACT</a>],
<a name="l00195"></a>00195                                             $result[<a class="code" href="class_d_b_contact_etp.html#aade08f92b75b16cf7b6bd6c4a22cef8">DBContactEtp::$FIELD_TEL_CONTACT</a>],
<a name="l00196"></a>00196                                             $result[<a class="code" href="class_d_b_contact_etp.html#d549b8c6b3d2b5514c245cac876298d4">DBContactEtp::$FIELD_FONCTION_CONTACT</a>],
<a name="l00197"></a>00197                                             $result[<a class="code" href="class_d_b_contact_etp.html#2232759e89d471fb60dde540a7d28c6d">DBContactEtp::$FIELD_ID_ENTREPRISE</a>]
<a name="l00198"></a>00198                                         );
<a name="l00199"></a>00199             
<a name="l00200"></a>00200             $i++;
<a name="l00201"></a>00201         }
<a name="l00202"></a>00202         
<a name="l00203"></a>00203         <span class="keywordflow">return</span> $return;
<a name="l00204"></a>00204     }
<a name="l00205"></a>00205         
<a name="l00206"></a>00206         
<a name="l00218"></a><a class="code" href="class_d_b_contact_etp.html#4f24ab7580983ee38b2e5aadb0a3feb8">00218</a>     <span class="keyword">public</span>  function <a class="code" href="class_d_b_contact_etp.html#4f24ab7580983ee38b2e5aadb0a3feb8">updateRecord</a>($nomContact, $prenomContact, $emailContact, $telContact, $fonctionContact, $idEntreprise){
<a name="l00219"></a>00219         $sql = <span class="stringliteral">"UPDATE "</span>.DBContactEtp::$TABLE_NAME.<span class="stringliteral">" SET "</span>;
<a name="l00220"></a>00220         $sql .= <a class="code" href="class_d_b_contact_etp.html#4341f05c7de50c3d93db20d6fefd1ff8">DBContactEtp::$FIELD_NOM_CONTACT</a>.<span class="stringliteral">"="</span>.<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;processString(<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;echapString($nomContact)).<span class="stringliteral">","</span>;
<a name="l00221"></a>00221         $sql .= <a class="code" href="class_d_b_contact_etp.html#7ae27ee9b61162d29e1d98b2dbff965b">DBContactEtp::$FIELD_PRENOM_CONTACT</a>.<span class="stringliteral">"="</span>.<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;processObject(<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;echapString($prenomContact)).<span class="stringliteral">","</span>;
<a name="l00222"></a>00222         $sql .= <a class="code" href="class_d_b_contact_etp.html#d1f836b7000df5824ffe57651d2ded1d">DBContactEtp::$FIELD_EMAIL_CONTACT</a>.<span class="stringliteral">"="</span>.<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;processObject(<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;echapString($emailContact)).<span class="stringliteral">","</span>;
<a name="l00223"></a>00223         $sql .= <a class="code" href="class_d_b_contact_etp.html#aade08f92b75b16cf7b6bd6c4a22cef8">DBContactEtp::$FIELD_TEL_CONTACT</a>.<span class="stringliteral">"="</span>.<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;processObject(<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;echapString($telContact)).<span class="stringliteral">","</span>;
<a name="l00224"></a>00224         $sql .= <a class="code" href="class_d_b_contact_etp.html#d549b8c6b3d2b5514c245cac876298d4">DBContactEtp::$FIELD_FONCTION_CONTACT</a>.<span class="stringliteral">"="</span>.<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;processObject(<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;echapString($fonctionContact)).<span class="stringliteral">","</span>;
<a name="l00225"></a>00225         $sql .= <a class="code" href="class_d_b_contact_etp.html#2232759e89d471fb60dde540a7d28c6d">DBContactEtp::$FIELD_ID_ENTREPRISE</a>.<span class="stringliteral">"="</span>.<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;processInt($idEntreprise).<span class="stringliteral">""</span>;
<a name="l00226"></a>00226         
<a name="l00227"></a>00227         $sql .= <span class="stringliteral">" WHERE 1"</span>;
<a name="l00228"></a>00228         $sql .= <span class="stringliteral">" AND "</span>.DBContactEtp::$FIELD_ID_CONTACT.<span class="stringliteral">"="</span>.<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;processInt($this-&gt;_idContact);
<a name="l00229"></a>00229         
<a name="l00230"></a>00230         <a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;executeQuery($sql);
<a name="l00231"></a>00231         
<a name="l00232"></a>00232         $this-&gt;_nomContact = <a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;echapString($nomContact);
<a name="l00233"></a>00233         $this-&gt;_prenomContact = <a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;echapString($prenomContact);
<a name="l00234"></a>00234         $this-&gt;_emailContact = <a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;echapString($emailContact);
<a name="l00235"></a>00235         $this-&gt;_telContact = <a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;echapString($telContact);
<a name="l00236"></a>00236         $this-&gt;_fonctionContact = <a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;echapString($fonctionContact);
<a name="l00237"></a>00237         $this-&gt;_idEntreprise = $idEntreprise;
<a name="l00238"></a>00238     }
<a name="l00239"></a>00239     
<a name="l00240"></a>00240         
<a name="l00245"></a><a class="code" href="class_d_b_contact_etp.html#15b54e860bc18fdd171cdc22725f1dde">00245</a>         <span class="keyword">public</span>  function <a class="code" href="class_d_b_contact_etp.html#15b54e860bc18fdd171cdc22725f1dde">deleteRecord</a>(){
<a name="l00246"></a>00246         $sql = <span class="stringliteral">"DELETE FROM "</span>.DBContactEtp::$TABLE_NAME.<span class="stringliteral">" WHERE 1"</span>;
<a name="l00247"></a>00247         $sql .= <span class="stringliteral">" AND "</span>.DBContactEtp::$FIELD_ID_CONTACT.<span class="stringliteral">"="</span>.<a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;processInt($this-&gt;_idContact);
<a name="l00248"></a>00248         
<a name="l00249"></a>00249         <a class="code" href="class_d_b_connector.html#43db9aca89fd7bf7ecd0643174246776">DBConnector::getDBConnector</a>()-&gt;executeQuery($sql);
<a name="l00250"></a>00250     }
<a name="l00251"></a>00251         
<a name="l00252"></a>00252         
<a name="l00253"></a>00253         
<a name="l00254"></a>00254     <span class="comment">// Méthode non générée</span>
<a name="l00259"></a><a class="code" href="class_d_b_contact_etp.html#2b65ea9e5aa78a1e58c0ea32060aaf49">00259</a> <span class="comment"></span>    <span class="keyword">private</span> function <a class="code" href="class_d_b_contact_etp.html#2b65ea9e5aa78a1e58c0ea32060aaf49">findBestContact</a>($liste_contacts,$nomContactRef,$prenomContactRef,$mailContactRef,
<a name="l00260"></a>00260                                      $telContactRef, $fonctionContactRef, $entreprise){
<a name="l00261"></a>00261         $nb_elements = 0;
<a name="l00262"></a>00262         foreach ($liste_contacts as $contact){
<a name="l00263"></a>00263             <span class="keywordflow">if</span> ($contact instanceof <a class="code" href="class_d_b_contact_etp.html">DBContactEtp</a>){
<a name="l00264"></a>00264                 <span class="keywordflow">if</span> (($nomContactRef==$contact-&gt;<a class="code" href="class_d_b_contact_etp.html#bf442b50c4cb32bf613e906113debec3">getNomContact</a>()) &amp;&amp;
<a name="l00265"></a>00265                      ($prenomContactRef == $contact-&gt;<a class="code" href="class_d_b_contact_etp.html#bb326f37e0ecfcb61d7f96a99e9319a4">getPrenomContact</a>()) &amp;&amp;
<a name="l00266"></a>00266                      ($mailContactRef == $contact-&gt;<a class="code" href="class_d_b_contact_etp.html#9da30a380b631337c056158d347c1736">getEmailContact</a>()) &amp;&amp;
<a name="l00267"></a>00267                      ($telContactRef == $contact-&gt;<a class="code" href="class_d_b_contact_etp.html#af1c40a38a300b2eaa866a8695a2ad5c">getTelContact</a>()) &amp;&amp;
<a name="l00268"></a>00268                      ($fonctionContactRef == $contact-&gt;<a class="code" href="class_d_b_contact_etp.html#1b3316e4137fe2ead0762bf61358ef03">getFonctionContact</a>()) &amp;&amp;
<a name="l00269"></a>00269                      ($entreprise-&gt;<a class="code" href="class_d_b_contact_etp.html#7ce99446674a378bb8361fec12e346f4">getIdEntreprise</a>() == $contact-&gt;getEntreprise()-&gt;<a class="code" href="class_d_b_contact_etp.html#7ce99446674a378bb8361fec12e346f4">getIdEntreprise</a>())){
<a name="l00270"></a>00270                     <span class="keywordflow">return</span> $contact;
<a name="l00271"></a>00271                 }
<a name="l00272"></a>00272             }
<a name="l00273"></a>00273         }
<a name="l00274"></a>00274         <span class="keywordflow">return</span> null;
<a name="l00275"></a>00275     }
<a name="l00276"></a>00276 }
<a name="l00277"></a>00277 ?&gt;
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Mar 28 11:48:05 2007 for Stage by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1-p1 </small></address>
</body>
</html>
