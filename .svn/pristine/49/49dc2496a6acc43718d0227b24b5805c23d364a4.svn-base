<?php
set_include_path(".".PATH_SEPARATOR."../..");
require_once("inc/main.inc.php");

// Gnr via PHPClassGenerator via l'url index.php?nb_champs=30&pgc_url=&nom_table=stage&nom_champ_1=id_stage&type_champ_1=3&taille_champ_1=&champ_facultatif_1=&valeur_defaut_1=&auto_increment_1=on&clef_primaire_1=on&getter_1=on&setter_1=&nom_champ_2=id_param_stage&type_champ_2=3&taille_champ_2=&champ_facultatif_2=&valeur_defaut_2=&auto_increment_2=&clef_primaire_2=&getter_2=on&setter_2=&nom_champ_3=id_domaine&type_champ_3=3&taille_champ_3=&champ_facultatif_3=&valeur_defaut_3=&auto_increment_3=&clef_primaire_3=&getter_3=on&setter_3=&nom_champ_4=id_etudiant&type_champ_4=3&taille_champ_4=&champ_facultatif_4=&valeur_defaut_4=&auto_increment_4=&clef_primaire_4=&getter_4=on&setter_4=&nom_champ_5=adresse_stage&type_champ_5=1&taille_champ_5=255&champ_facultatif_5=&valeur_defaut_5=&auto_increment_5=&clef_primaire_5=&getter_5=on&setter_5=&nom_champ_6=id_tuteur&type_champ_6=3&taille_champ_6=&champ_facultatif_6=&valeur_defaut_6=&auto_increment_6=&clef_primaire_6=&getter_6=on&setter_6=&nom_champ_7=id_relecteur&type_champ_7=3&taille_champ_7=&champ_facultatif_7=&valeur_defaut_7=&auto_increment_7=&clef_primaire_7=&getter_7=on&setter_7=&nom_champ_8=date_debut&type_champ_8=8&taille_champ_8=&champ_facultatif_8=&valeur_defaut_8=&auto_increment_8=&clef_primaire_8=&getter_8=on&setter_8=&nom_champ_9=date_fin&type_champ_9=8&taille_champ_9=&champ_facultatif_9=&valeur_defaut_9=&auto_increment_9=&clef_primaire_9=&getter_9=on&setter_9=&nom_champ_10=intitule&type_champ_10=2&taille_champ_10=&champ_facultatif_10=&valeur_defaut_10=&auto_increment_10=&clef_primaire_10=&getter_10=on&setter_10=&nom_champ_11=sujet&type_champ_11=2&taille_champ_11=&champ_facultatif_11=&valeur_defaut_11=&auto_increment_11=&clef_primaire_11=&getter_11=on&setter_11=&nom_champ_12=valide&type_champ_12=3&taille_champ_12=&champ_facultatif_12=&valeur_defaut_12=&auto_increment_12=&clef_primaire_12=&getter_12=on&setter_12=&nom_champ_13=date_soutenance&type_champ_13=8&taille_champ_13=&champ_facultatif_13=on&valeur_defaut_13=&auto_increment_13=&clef_primaire_13=&getter_13=on&setter_13=&nom_champ_14=conventionne&type_champ_14=3&taille_champ_14=&champ_facultatif_14=&valeur_defaut_14=&auto_increment_14=&clef_primaire_14=&getter_14=on&setter_14=&nom_champ_15=heure_debut&type_champ_15=9&taille_champ_15=&champ_facultatif_15=on&valeur_defaut_15=&auto_increment_15=&clef_primaire_15=&getter_15=on&setter_15=&nom_champ_16=heure_fin&type_champ_16=9&taille_champ_16=&champ_facultatif_16=on&valeur_defaut_16=&auto_increment_16=&clef_primaire_16=&getter_16=on&setter_16=&nom_champ_17=id_entreprise&type_champ_17=3&taille_champ_17=&champ_facultatif_17=&valeur_defaut_17=&auto_increment_17=&clef_primaire_17=&getter_17=on&setter_17=&nom_champ_18=lieu_soutenance&type_champ_18=1&taille_champ_18=100&champ_facultatif_18=on&valeur_defaut_18=&auto_increment_18=&clef_primaire_18=&getter_18=on&setter_18=&nom_champ_19=tel_stage&type_champ_19=1&taille_champ_19=20&champ_facultatif_19=on&valeur_defaut_19=&auto_increment_19=&clef_primaire_19=&getter_19=on&setter_19=&nom_champ_20=motif_refus_stage&type_champ_20=2&taille_champ_20=&champ_facultatif_20=on&valeur_defaut_20=&auto_increment_20=&clef_primaire_20=&getter_20=on&setter_20=&nom_champ_21=mail_stage&type_champ_21=1&taille_champ_21=255&champ_facultatif_21=on&valeur_defaut_21=&auto_increment_21=&clef_primaire_21=&getter_21=on&setter_21=&nom_champ_22=contact&type_champ_22=1&taille_champ_22=255&champ_facultatif_22=&valeur_defaut_22=&auto_increment_22=&clef_primaire_22=&getter_22=on&setter_22=&nom_champ_23=contact_email&type_champ_23=1&taille_champ_23=255&champ_facultatif_23=&valeur_defaut_23=&auto_increment_23=&clef_primaire_23=&getter_23=on&setter_23=&nom_champ_24=contact_tel&type_champ_24=1&taille_champ_24=255&champ_facultatif_24=&valeur_defaut_24=&auto_increment_24=&clef_primaire_24=&getter_24=on&setter_24=&nom_champ_25=&type_champ_25=1&taille_champ_25=&champ_facultatif_25=&valeur_defaut_25=&auto_increment_25=&clef_primaire_25=&getter_25=on&setter_25=&nom_champ_26=&type_champ_26=1&taille_champ_26=&champ_facultatif_26=&valeur_defaut_26=&auto_increment_26=&clef_primaire_26=&getter_26=on&setter_26=&nom_champ_27=&type_champ_27=1&taille_champ_27=&champ_facultatif_27=&valeur_defaut_27=&auto_increment_27=&clef_primaire_27=&getter_27=on&setter_27=&nom_champ_28=&type_champ_28=1&taille_champ_28=&champ_facultatif_28=&valeur_defaut_28=&auto_increment_28=&clef_primaire_28=&getter_28=on&setter_28=&nom_champ_29=&type_champ_29=1&taille_champ_29=&champ_facultatif_29=&valeur_defaut_29=&auto_increment_29=&clef_primaire_29=&getter_29=on&setter_29=&nom_champ_30=&type_champ_30=1&taille_champ_30=&champ_facultatif_30=&valeur_defaut_30=&auto_increment_30=&clef_primaire_30=&getter_30=on&setter_30=&

 class DBOLDStage     {
    private static $TABLE_NAME = "stage";
    private static $FIELD_ID_STAGE = "id_stage";
    private static $FIELD_ID_PARAM_STAGE = "id_param_stage";
    private static $FIELD_ID_DOMAINE = "id_domaine";
    private static $FIELD_ID_ETUDIANT = "id_etudiant";
    private static $FIELD_ADRESSE_STAGE = "adresse_stage";
    private static $FIELD_ID_TUTEUR = "id_tuteur";
    private static $FIELD_ID_RELECTEUR = "id_relecteur";
    private static $FIELD_DATE_DEBUT = "date_debut";
    private static $FIELD_DATE_FIN = "date_fin";
    private static $FIELD_INTITULE = "intitule";
    private static $FIELD_SUJET = "sujet";
    private static $FIELD_VALIDE = "valide";
    private static $FIELD_DATE_SOUTENANCE = "date_soutenance";
    private static $FIELD_CONVENTIONNE = "conventionne";
    private static $FIELD_HEURE_DEBUT = "heure_debut";
    private static $FIELD_HEURE_FIN = "heure_fin";
    private static $FIELD_ID_ENTREPRISE = "id_entreprise";
    private static $FIELD_LIEU_SOUTENANCE = "lieu_soutenance";
    private static $FIELD_TEL_STAGE = "tel_stage";
    private static $FIELD_MOTIF_REFUS_STAGE = "motif_refus_stage";
    private static $FIELD_MAIL_STAGE = "mail_stage";
    private static $FIELD_CONTACT = "contact";
    private static $FIELD_CONTACT_EMAIL = "contact_email";
    private static $FIELD_CONTACT_TEL = "contact_tel";

    private $_idStage;
    private $_idParamStage;
    private $_idDomaine;
    private $_idEtudiant;
    private $_adresseStage;
    private $_idTuteur;
    private $_idRelecteur;
    private $_dateDebut;
    private $_dateFin;
    private $_intitule;
    private $_sujet;
    private $_valide;
    private $_dateSoutenance;
    private $_conventionne;
    private $_heureDebut;
    private $_heureFin;
    private $_idEntreprise;
    private $_lieuSoutenance;
    private $_telStage;
    private $_motifRefusStage;
    private $_mailStage;
    private $_contact;
    private $_contactEmail;
    private $_contactTel;


    private  function __construct($idStage, $idParamStage, $idDomaine, $idEtudiant, $adresseStage, $idTuteur, $idRelecteur, $dateDebut, $dateFin, $intitule, $sujet, $valide, $dateSoutenance, $conventionne, $heureDebut, $heureFin, $idEntreprise, $lieuSoutenance, $telStage, $motifRefusStage, $mailStage, $contact, $contactEmail, $contactTel){
        $this->_idStage = $idStage;
        $this->_idParamStage = $idParamStage;
        $this->_idDomaine = $idDomaine;
        $this->_idEtudiant = $idEtudiant;
        $this->_adresseStage = $adresseStage;
        $this->_idTuteur = $idTuteur;
        $this->_idRelecteur = $idRelecteur;
        $this->_dateDebut = $dateDebut;
        $this->_dateFin = $dateFin;
        $this->_intitule = $intitule;
        $this->_sujet = $sujet;
        $this->_valide = $valide;
        $this->_dateSoutenance = $dateSoutenance;
        $this->_conventionne = $conventionne;
        $this->_heureDebut = $heureDebut;
        $this->_heureFin = $heureFin;
        $this->_idEntreprise = $idEntreprise;
        $this->_lieuSoutenance = $lieuSoutenance;
        $this->_telStage = $telStage;
        $this->_motifRefusStage = $motifRefusStage;
        $this->_mailStage = $mailStage;
        $this->_contact = $contact;
        $this->_contactEmail = $contactEmail;
        $this->_contactTel = $contactTel;
    }
/// Methodes rajoutes
    public  function getEtudiant(){
        $etudiants = DBOLDEtudiant::getRecords($this->_idEtudiant);
//        if(count($etudiants) == 0) return null;
//        else {
            assert(count($etudiants) == 1);
            return $etudiants[0];
//        }
    }
    public function getMaitreDeStage(){
        $mds = DBOLDRolePersStage::getRecords("", "", 1, $this->_idStage);
        if(count($mds) == 0) return null;
        else {
//            assert(count($mds) == 1);
            return $mds[0]->getPersonne();
        }
    }
    public function getSignataire(){
        $signataires = DBOLDRolePersStage::getRecords("", "", 2, $this->_idStage);
        if(count($signataires) == 0) return null;
        else {
//            assert(count($signataires) == 1);
            return $signataires[0]->getPersonne();
        }
    }
    public function getContact(){
        $contact = DBOLDRolePersStage::getRecords("", "", 3, $this->_idStage);
        if(count($contact) == 0) return null;
        else {
            assert(count($contact) == 1);
            return $contact[0]->getPersonne();
        }
    }
    public  function getDomaine(){
        $domaines = DBOLDDomaine::getRecords($this->_idDomaine);
        if(count($domaines) == 0) return null;
        else {
            assert(count($domaines) == 1);
            return $domaines[0];
        }
    }
    public function getTechnos(){
        $liensTechnos = DBOLDTechnoStage::getRecords("", $this->_idStage);
        $technos = array();
        foreach($liensTechnos as $lienTechno){
            $techno = $lienTechno->getTechnologie();
            if($techno != null)
                $technos[count($technos)] = $techno;
        }
        return $technos;
    }
    public  function getEntreprise(){
        $entreprises = DBOLDEntreprise::getRecords($this->_idEntreprise);
        if(count($entreprises) == 0) return null;
        else {
            assert(count($entreprises) == 1);
            return $entreprises[0];
        }
    }
    public function getTuteur(){
        $tuteurs = DBOLDEnseignant::getRecords($this->_idTuteur);
        if(count($tuteurs) == 0) return null;
        else {
            assert(count($tuteurs) == 1);
            return $tuteurs[0];
        }
    }
    public function getRelecteur(){
        $relecteurs = DBOLDEnseignant::getRecords($this->_idRelecteur);
        if(count($relecteurs) == 0) return null;
        else {
            assert(count($relecteurs) == 1);
            return $relecteurs[0];
        }
    }
    public function getVisites(){
        return DBOLDVisite::getRecords("", $this->_idStage);
    }
/// Fin mthodes rajoutes
    public  function getIdStage(){
        return $this->_idStage;
    }
    public  function getIdParamStage(){
        return $this->_idParamStage;
    }
    public  function getAdresseStage(){
        return $this->_adresseStage;
    }
    public  function getIdTuteur(){
        return $this->_idTuteur;
    }
    public  function getIdRelecteur(){
        return $this->_idRelecteur;
    }
    public  function getDateDebut(){
        return $this->_dateDebut;
    }
    public  function getDateFin(){
        return $this->_dateFin;
    }
    public  function getIntitule(){
        return $this->_intitule;
    }
    public  function getSujet(){
        return $this->_sujet;
    }
    public  function getValide(){
        return $this->_valide;
    }
    public  function getDateSoutenance(){
        return $this->_dateSoutenance;
    }
    public  function getConventionne(){
        return $this->_conventionne;
    }
    public  function getHeureDebut(){
        return $this->_heureDebut;
    }
    public  function getHeureFin(){
        return $this->_heureFin;
    }
    public  function getLieuSoutenance(){
        return $this->_lieuSoutenance;
    }
    public  function getTelStage(){
        return $this->_telStage;
    }
    public  function getMotifRefusStage(){
        return $this->_motifRefusStage;
    }
    public  function getMailStage(){
        return $this->_mailStage;
    }
/*    public  function getContact(){
        return $this->_contact;
    }
*/
    public  function getContactEmail(){
        return $this->_contactEmail;
    }
    public  function getContactTel(){
        return $this->_contactTel;
    }
    public static function tableExists(){
        return DBConnector::getDBConnectorSource()->tableExists(DBOLDStage::$TABLE_NAME);
    }
    public static function createTable(){
        $sql = "CREATE TABLE `".DBOLDStage::$TABLE_NAME."` (                              `".DBOLDStage::$FIELD_ID_STAGE."` INT(11) NOT NULL  auto_increment,                              `".DBOLDStage::$FIELD_ID_PARAM_STAGE."` INT(11) NOT NULL  ,                              `".DBOLDStage::$FIELD_ID_DOMAINE."` INT(11) NOT NULL  ,                              `".DBOLDStage::$FIELD_ID_ETUDIANT."` INT(11) NOT NULL  ,                              `".DBOLDStage::$FIELD_ADRESSE_STAGE."` VARCHAR(255) NOT NULL  ,                              `".DBOLDStage::$FIELD_ID_TUTEUR."` INT(11) NOT NULL  ,                              `".DBOLDStage::$FIELD_ID_RELECTEUR."` INT(11) NOT NULL  ,                              `".DBOLDStage::$FIELD_DATE_DEBUT."` DATE NOT NULL  ,                              `".DBOLDStage::$FIELD_DATE_FIN."` DATE NOT NULL  ,                              `".DBOLDStage::$FIELD_INTITULE."` TEXT NOT NULL  ,                              `".DBOLDStage::$FIELD_SUJET."` TEXT NOT NULL  ,                              `".DBOLDStage::$FIELD_VALIDE."` INT(11) NOT NULL  ,                              `".DBOLDStage::$FIELD_DATE_SOUTENANCE."` DATE NULL  ,                              `".DBOLDStage::$FIELD_CONVENTIONNE."` INT(11) NOT NULL  ,                              `".DBOLDStage::$FIELD_HEURE_DEBUT."` TIME NULL  ,                              `".DBOLDStage::$FIELD_HEURE_FIN."` TIME NULL  ,                              `".DBOLDStage::$FIELD_ID_ENTREPRISE."` INT(11) NOT NULL  ,                              `".DBOLDStage::$FIELD_LIEU_SOUTENANCE."` VARCHAR(100) NULL  ,                              `".DBOLDStage::$FIELD_TEL_STAGE."` VARCHAR(20) NULL  ,                              `".DBOLDStage::$FIELD_MOTIF_REFUS_STAGE."` TEXT NULL  ,                              `".DBOLDStage::$FIELD_MAIL_STAGE."` VARCHAR(255) NULL  ,                              `".DBOLDStage::$FIELD_CONTACT."` VARCHAR(255) NOT NULL  ,                              `".DBOLDStage::$FIELD_CONTACT_EMAIL."` VARCHAR(255) NOT NULL  ,                              `".DBOLDStage::$FIELD_CONTACT_TEL."` VARCHAR(255) NOT NULL  ,                            PRIMARY KEY (`".DBOLDStage::$FIELD_ID_STAGE."`)                ) ENGINE=MyISAM;";                        foreach(explode(";", $sql) as $query)        {            if($query != "")                DBConnector::getDBConnectorSource()->executeQuery($query);        }
    }
    public static function createRecord($idParamStage, $idDomaine, $idEtudiant, $adresseStage, $idTuteur, $idRelecteur, $dateDebut, $dateFin, $intitule, $sujet, $valide, $dateSoutenance, $conventionne, $heureDebut, $heureFin, $idEntreprise, $lieuSoutenance, $telStage, $motifRefusStage, $mailStage, $contact, $contactEmail, $contactTel){
        $sql = "INSERT INTO ".DBOLDStage::$TABLE_NAME." ("                            .DBOLDStage::$FIELD_ID_PARAM_STAGE.", "                            .DBOLDStage::$FIELD_ID_DOMAINE.", "                            .DBOLDStage::$FIELD_ID_ETUDIANT.", "                            .DBOLDStage::$FIELD_ADRESSE_STAGE.", "                            .DBOLDStage::$FIELD_ID_TUTEUR.", "                            .DBOLDStage::$FIELD_ID_RELECTEUR.", "                            .DBOLDStage::$FIELD_DATE_DEBUT.", "                            .DBOLDStage::$FIELD_DATE_FIN.", "                            .DBOLDStage::$FIELD_INTITULE.", "                            .DBOLDStage::$FIELD_SUJET.", "                            .DBOLDStage::$FIELD_VALIDE.", "                            .DBOLDStage::$FIELD_DATE_SOUTENANCE.", "                            .DBOLDStage::$FIELD_CONVENTIONNE.", "                            .DBOLDStage::$FIELD_HEURE_DEBUT.", "                            .DBOLDStage::$FIELD_HEURE_FIN.", "                            .DBOLDStage::$FIELD_ID_ENTREPRISE.", "                            .DBOLDStage::$FIELD_LIEU_SOUTENANCE.", "                            .DBOLDStage::$FIELD_TEL_STAGE.", "                            .DBOLDStage::$FIELD_MOTIF_REFUS_STAGE.", "                            .DBOLDStage::$FIELD_MAIL_STAGE.", "                            .DBOLDStage::$FIELD_CONTACT.", "                            .DBOLDStage::$FIELD_CONTACT_EMAIL.", "                            .DBOLDStage::$FIELD_CONTACT_TEL." "                            .") VALUES ("                            .DBConnector::getDBConnectorSource()->processInt($idParamStage).", "                            .DBConnector::getDBConnectorSource()->processInt($idDomaine).", "                            .DBConnector::getDBConnectorSource()->processInt($idEtudiant).", "                            .DBConnector::getDBConnectorSource()->processString(DBConnector::getDBConnectorSource()->echapString($adresseStage)).", "                            .DBConnector::getDBConnectorSource()->processInt($idTuteur).", "                            .DBConnector::getDBConnectorSource()->processInt($idRelecteur).", "                            .DBConnector::getDBConnectorSource()->computeDate($dateDebut).", "                            .DBConnector::getDBConnectorSource()->computeDate($dateFin).", "                            .DBConnector::getDBConnectorSource()->processString(DBConnector::getDBConnectorSource()->echapString($intitule)).", "                            .DBConnector::getDBConnectorSource()->processString(DBConnector::getDBConnectorSource()->echapString($sujet)).", "                            .DBConnector::getDBConnectorSource()->processInt($valide).", "                            .DBConnector::getDBConnectorSource()->computeDate($dateSoutenance).", "                            .DBConnector::getDBConnectorSource()->processInt($conventionne).", "                            .DBConnector::getDBConnectorSource()->computeTime($heureDebut).", "                            .DBConnector::getDBConnectorSource()->computeTime($heureFin).", "                            .DBConnector::getDBConnectorSource()->processInt($idEntreprise).", "                            .DBConnector::getDBConnectorSource()->processObject(DBConnector::getDBConnectorSource()->echapString($lieuSoutenance)).", "                            .DBConnector::getDBConnectorSource()->processObject(DBConnector::getDBConnectorSource()->echapString($telStage)).", "                            .DBConnector::getDBConnectorSource()->processObject(DBConnector::getDBConnectorSource()->echapString($motifRefusStage)).", "                            .DBConnector::getDBConnectorSource()->processObject(DBConnector::getDBConnectorSource()->echapString($mailStage)).", "                            .DBConnector::getDBConnectorSource()->processString(DBConnector::getDBConnectorSource()->echapString($contact)).", "                            .DBConnector::getDBConnectorSource()->processString(DBConnector::getDBConnectorSource()->echapString($contactEmail)).", "                            .DBConnector::getDBConnectorSource()->processString(DBConnector::getDBConnectorSource()->echapString($contactTel))." "                            .")";                $id = DBConnector::getDBConnectorSource()->executeQuery($sql);                $obj = DBOLDStage::getRecords($id);        assert(count($obj) == 1);        return $obj[0];
    }
    public static function getRecords($idStage="", $idParamStage="", $idDomaine="", $idEtudiant="", $adresseStage="", $idTuteur="", $idRelecteur="", $dateDebut="", $dateFin="", $intitule="", $sujet="", $valide="", $dateSoutenance="", $conventionne="", $heureDebut="", $heureFin="", $idEntreprise="", $lieuSoutenance="", $telStage="", $motifRefusStage="", $mailStage="", $contact="", $contactEmail="", $contactTel=""){
        $sql = "SELECT * FROM ".DBOLDStage::$TABLE_NAME." WHERE 1";                if($idStage != "")            $sql .= " AND ".DBOLDStage::$FIELD_ID_STAGE."=".DBConnector::getDBConnectorSource()->processInt($idStage);        if($idParamStage != "")            $sql .= " AND ".DBOLDStage::$FIELD_ID_PARAM_STAGE."=".DBConnector::getDBConnectorSource()->processInt($idParamStage);        if($idDomaine != "")            $sql .= " AND ".DBOLDStage::$FIELD_ID_DOMAINE."=".DBConnector::getDBConnectorSource()->processInt($idDomaine);        if($idEtudiant != "")            $sql .= " AND ".DBOLDStage::$FIELD_ID_ETUDIANT."=".DBConnector::getDBConnectorSource()->processInt($idEtudiant);        if($adresseStage != "")            $sql .= " AND ".DBOLDStage::$FIELD_ADRESSE_STAGE."=".DBConnector::getDBConnectorSource()->processString(DBConnector::getDBConnectorSource()->echapString($adresseStage));        if($idTuteur != "")            $sql .= " AND ".DBOLDStage::$FIELD_ID_TUTEUR."=".DBConnector::getDBConnectorSource()->processInt($idTuteur);        if($idRelecteur != "")            $sql .= " AND ".DBOLDStage::$FIELD_ID_RELECTEUR."=".DBConnector::getDBConnectorSource()->processInt($idRelecteur);        if($dateDebut != "")            $sql .= " AND ".DBOLDStage::$FIELD_DATE_DEBUT."=".DBConnector::getDBConnectorSource()->computeDate($dateDebut);        if($dateFin != "")            $sql .= " AND ".DBOLDStage::$FIELD_DATE_FIN."=".DBConnector::getDBConnectorSource()->computeDate($dateFin);        if($intitule != "")            $sql .= " AND ".DBOLDStage::$FIELD_INTITULE."=".DBConnector::getDBConnectorSource()->processString(DBConnector::getDBConnectorSource()->echapString($intitule));        if($sujet != "")            $sql .= " AND ".DBOLDStage::$FIELD_SUJET."=".DBConnector::getDBConnectorSource()->processString(DBConnector::getDBConnectorSource()->echapString($sujet));        if($valide != "")            $sql .= " AND ".DBOLDStage::$FIELD_VALIDE."=".DBConnector::getDBConnectorSource()->processInt($valide);        if($dateSoutenance != "")            $sql .= " AND ".DBOLDStage::$FIELD_DATE_SOUTENANCE."=".DBConnector::getDBConnectorSource()->computeDate($dateSoutenance);        if($conventionne != "")            $sql .= " AND ".DBOLDStage::$FIELD_CONVENTIONNE."=".DBConnector::getDBConnectorSource()->processInt($conventionne);        if($heureDebut != "")            $sql .= " AND ".DBOLDStage::$FIELD_HEURE_DEBUT."=".DBConnector::getDBConnectorSource()->computeTime($heureDebut);        if($heureFin != "")            $sql .= " AND ".DBOLDStage::$FIELD_HEURE_FIN."=".DBConnector::getDBConnectorSource()->computeTime($heureFin);        if($idEntreprise != "")            $sql .= " AND ".DBOLDStage::$FIELD_ID_ENTREPRISE."=".DBConnector::getDBConnectorSource()->processInt($idEntreprise);        if($lieuSoutenance != "")            $sql .= " AND ".DBOLDStage::$FIELD_LIEU_SOUTENANCE."=".DBConnector::getDBConnectorSource()->processObject(DBConnector::getDBConnectorSource()->echapString($lieuSoutenance));        if($telStage != "")            $sql .= " AND ".DBOLDStage::$FIELD_TEL_STAGE."=".DBConnector::getDBConnectorSource()->processObject(DBConnector::getDBConnectorSource()->echapString($telStage));        if($motifRefusStage != "")            $sql .= " AND ".DBOLDStage::$FIELD_MOTIF_REFUS_STAGE."=".DBConnector::getDBConnectorSource()->processObject(DBConnector::getDBConnectorSource()->echapString($motifRefusStage));        if($mailStage != "")            $sql .= " AND ".DBOLDStage::$FIELD_MAIL_STAGE."=".DBConnector::getDBConnectorSource()->processObject(DBConnector::getDBConnectorSource()->echapString($mailStage));        if($contact != "")            $sql .= " AND ".DBOLDStage::$FIELD_CONTACT."=".DBConnector::getDBConnectorSource()->processString(DBConnector::getDBConnectorSource()->echapString($contact));        if($contactEmail != "")            $sql .= " AND ".DBOLDStage::$FIELD_CONTACT_EMAIL."=".DBConnector::getDBConnectorSource()->processString(DBConnector::getDBConnectorSource()->echapString($contactEmail));        if($contactTel != "")            $sql .= " AND ".DBOLDStage::$FIELD_CONTACT_TEL."=".DBConnector::getDBConnectorSource()->processString(DBConnector::getDBConnectorSource()->echapString($contactTel));                $res = DBConnector::getDBConnectorSource()->executeQuery($sql);                $return = array();        $i=0;        while($result = DBConnector::getDBConnectorSource()->fetchArray($res))        {            $return[$i] = new DBOLDStage(                                            $result[DBOLDStage::$FIELD_ID_STAGE],                                            $result[DBOLDStage::$FIELD_ID_PARAM_STAGE],                                            $result[DBOLDStage::$FIELD_ID_DOMAINE],                                            $result[DBOLDStage::$FIELD_ID_ETUDIANT],                                            $result[DBOLDStage::$FIELD_ADRESSE_STAGE],                                            $result[DBOLDStage::$FIELD_ID_TUTEUR],                                            $result[DBOLDStage::$FIELD_ID_RELECTEUR],                                            DBConnector::getDBConnectorSource()->decomputeDate($result[DBOLDStage::$FIELD_DATE_DEBUT]),                                            DBConnector::getDBConnectorSource()->decomputeDate($result[DBOLDStage::$FIELD_DATE_FIN]),                                            $result[DBOLDStage::$FIELD_INTITULE],                                            $result[DBOLDStage::$FIELD_SUJET],                                            $result[DBOLDStage::$FIELD_VALIDE],                                            DBConnector::getDBConnectorSource()->decomputeDate($result[DBOLDStage::$FIELD_DATE_SOUTENANCE]),                                            $result[DBOLDStage::$FIELD_CONVENTIONNE],                                            DBConnector::getDBConnectorSource()->decomputeTime($result[DBOLDStage::$FIELD_HEURE_DEBUT]),                                            DBConnector::getDBConnectorSource()->decomputeTime($result[DBOLDStage::$FIELD_HEURE_FIN]),                                            $result[DBOLDStage::$FIELD_ID_ENTREPRISE],                                            $result[DBOLDStage::$FIELD_LIEU_SOUTENANCE],                                            $result[DBOLDStage::$FIELD_TEL_STAGE],                                            $result[DBOLDStage::$FIELD_MOTIF_REFUS_STAGE],                                            $result[DBOLDStage::$FIELD_MAIL_STAGE],                                            $result[DBOLDStage::$FIELD_CONTACT],                                            $result[DBOLDStage::$FIELD_CONTACT_EMAIL],                                            $result[DBOLDStage::$FIELD_CONTACT_TEL]                                        );                        $i++;        }                return $return;
    }
    public  function updateRecord($idParamStage, $idDomaine, $idEtudiant, $adresseStage, $idTuteur, $idRelecteur, $dateDebut, $dateFin, $intitule, $sujet, $valide, $dateSoutenance, $conventionne, $heureDebut, $heureFin, $idEntreprise, $lieuSoutenance, $telStage, $motifRefusStage, $mailStage, $contact, $contactEmail, $contactTel){
        $sql = "UPDATE ".DBOLDStage::$TABLE_NAME." SET ";        $sql .= DBOLDStage::$FIELD_ID_PARAM_STAGE."=".DBConnector::getDBConnectorSource()->processInt($idParamStage).",";        $sql .= DBOLDStage::$FIELD_ID_DOMAINE."=".DBConnector::getDBConnectorSource()->processInt($idDomaine).",";        $sql .= DBOLDStage::$FIELD_ID_ETUDIANT."=".DBConnector::getDBConnectorSource()->processInt($idEtudiant).",";        $sql .= DBOLDStage::$FIELD_ADRESSE_STAGE."=".DBConnector::getDBConnectorSource()->processString(DBConnector::getDBConnectorSource()->echapString($adresseStage)).",";        $sql .= DBOLDStage::$FIELD_ID_TUTEUR."=".DBConnector::getDBConnectorSource()->processInt($idTuteur).",";        $sql .= DBOLDStage::$FIELD_ID_RELECTEUR."=".DBConnector::getDBConnectorSource()->processInt($idRelecteur).",";        $sql .= DBOLDStage::$FIELD_DATE_DEBUT."=".DBConnector::getDBConnectorSource()->computeDate($dateDebut).",";        $sql .= DBOLDStage::$FIELD_DATE_FIN."=".DBConnector::getDBConnectorSource()->computeDate($dateFin).",";        $sql .= DBOLDStage::$FIELD_INTITULE."=".DBConnector::getDBConnectorSource()->processString(DBConnector::getDBConnectorSource()->echapString($intitule)).",";        $sql .= DBOLDStage::$FIELD_SUJET."=".DBConnector::getDBConnectorSource()->processString(DBConnector::getDBConnectorSource()->echapString($sujet)).",";        $sql .= DBOLDStage::$FIELD_VALIDE."=".DBConnector::getDBConnectorSource()->processInt($valide).",";        $sql .= DBOLDStage::$FIELD_DATE_SOUTENANCE."=".DBConnector::getDBConnectorSource()->computeDate($dateSoutenance).",";        $sql .= DBOLDStage::$FIELD_CONVENTIONNE."=".DBConnector::getDBConnectorSource()->processInt($conventionne).",";        $sql .= DBOLDStage::$FIELD_HEURE_DEBUT."=".DBConnector::getDBConnectorSource()->computeTime($heureDebut).",";        $sql .= DBOLDStage::$FIELD_HEURE_FIN."=".DBConnector::getDBConnectorSource()->computeTime($heureFin).",";        $sql .= DBOLDStage::$FIELD_ID_ENTREPRISE."=".DBConnector::getDBConnectorSource()->processInt($idEntreprise).",";        $sql .= DBOLDStage::$FIELD_LIEU_SOUTENANCE."=".DBConnector::getDBConnectorSource()->processObject(DBConnector::getDBConnectorSource()->echapString($lieuSoutenance)).",";        $sql .= DBOLDStage::$FIELD_TEL_STAGE."=".DBConnector::getDBConnectorSource()->processObject(DBConnector::getDBConnectorSource()->echapString($telStage)).",";        $sql .= DBOLDStage::$FIELD_MOTIF_REFUS_STAGE."=".DBConnector::getDBConnectorSource()->processObject(DBConnector::getDBConnectorSource()->echapString($motifRefusStage)).",";        $sql .= DBOLDStage::$FIELD_MAIL_STAGE."=".DBConnector::getDBConnectorSource()->processObject(DBConnector::getDBConnectorSource()->echapString($mailStage)).",";        $sql .= DBOLDStage::$FIELD_CONTACT."=".DBConnector::getDBConnectorSource()->processString(DBConnector::getDBConnectorSource()->echapString($contact)).",";        $sql .= DBOLDStage::$FIELD_CONTACT_EMAIL."=".DBConnector::getDBConnectorSource()->processString(DBConnector::getDBConnectorSource()->echapString($contactEmail)).",";        $sql .= DBOLDStage::$FIELD_CONTACT_TEL."=".DBConnector::getDBConnectorSource()->processString(DBConnector::getDBConnectorSource()->echapString($contactTel))."";                $sql .= " WHERE 1";        $sql .= " AND ".DBOLDStage::$FIELD_ID_STAGE."=".DBConnector::getDBConnectorSource()->processInt($this->_idStage);                DBConnector::getDBConnectorSource()->executeQuery($sql);                $this->_idParamStage = $idParamStage;        $this->_idDomaine = $idDomaine;        $this->_idEtudiant = $idEtudiant;        $this->_adresseStage = DBConnector::getDBConnectorSource()->echapString($adresseStage);        $this->_idTuteur = $idTuteur;        $this->_idRelecteur = $idRelecteur;        $this->_dateDebut = $dateDebut;        $this->_dateFin = $dateFin;        $this->_intitule = DBConnector::getDBConnectorSource()->echapString($intitule);        $this->_sujet = DBConnector::getDBConnectorSource()->echapString($sujet);        $this->_valide = $valide;        $this->_dateSoutenance = $dateSoutenance;        $this->_conventionne = $conventionne;        $this->_heureDebut = $heureDebut;        $this->_heureFin = $heureFin;        $this->_idEntreprise = $idEntreprise;        $this->_lieuSoutenance = DBConnector::getDBConnectorSource()->echapString($lieuSoutenance);        $this->_telStage = DBConnector::getDBConnectorSource()->echapString($telStage);        $this->_motifRefusStage = DBConnector::getDBConnectorSource()->echapString($motifRefusStage);        $this->_mailStage = DBConnector::getDBConnectorSource()->echapString($mailStage);        $this->_contact = DBConnector::getDBConnectorSource()->echapString($contact);        $this->_contactEmail = DBConnector::getDBConnectorSource()->echapString($contactEmail);        $this->_contactTel = DBConnector::getDBConnectorSource()->echapString($contactTel);
    }
    public  function deleteRecord(){
        $sql = "DELETE FROM ".DBOLDStage::$TABLE_NAME." WHERE 1";        $sql .= " AND ".DBOLDStage::$FIELD_ID_STAGE."=".DBConnector::getDBConnectorSource()->processInt($this->_idStage);                DBConnector::getDBConnectorSource()->executeQuery($sql);
    }
}
?>